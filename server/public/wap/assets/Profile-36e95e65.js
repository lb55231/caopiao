import{_ as y,u as w,q as U,r as q,p as x,v as h,o as k,b as s,c as P,d as S,e as l,f as i,w as u,B,C,D as I,s as m,g as Q}from"./index-755e54f6.js";const T={class:"profile-page"},N={class:"profile-content"},$={class:"submit-box"},j={__name:"Profile",setup(D){const c=w(),d=U(),r=q(!1),p=x(()=>d.userInfo||{}),a=h({realname:"",phone:"",email:"",qq:"",wechat:""}),_=async()=>{try{const o=await B();o.code===200&&Object.assign(a,o.data)}catch(o){console.error("加载资料失败:",o)}},f=async()=>{try{r.value=!0;const o=await C(a);o.code===200?(I("保存成功"),await d.getUserInfo(),setTimeout(()=>{c.back()},1500)):m(o.msg||"保存失败")}catch(o){m(o.message||"网络错误，请稍后重试")}finally{r.value=!1}};return k(()=>{_()}),(o,e)=>{const v=s("van-nav-bar"),n=s("van-field"),b=s("van-cell-group"),V=s("van-button"),g=s("van-form");return P(),S("div",T,[l(v,{title:"个人资料","left-arrow":"",onClickLeft:e[0]||(e[0]=t=>o.$router.back()),fixed:""}),i("div",N,[l(g,{onSubmit:f},{default:u(()=>[l(b,null,{default:u(()=>[l(n,{label:"用户名","model-value":p.value.username,readonly:"",disabled:""},null,8,["model-value"]),l(n,{modelValue:a.realname,"onUpdate:modelValue":e[1]||(e[1]=t=>a.realname=t),label:"真实姓名",placeholder:"请输入真实姓名"},null,8,["modelValue"]),l(n,{modelValue:a.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>a.phone=t),label:"手机号码",placeholder:"请输入手机号码",type:"tel"},null,8,["modelValue"]),l(n,{modelValue:a.email,"onUpdate:modelValue":e[3]||(e[3]=t=>a.email=t),label:"电子邮箱",placeholder:"请输入电子邮箱",type:"email"},null,8,["modelValue"]),l(n,{modelValue:a.qq,"onUpdate:modelValue":e[4]||(e[4]=t=>a.qq=t),label:"QQ号码",placeholder:"请输入QQ号码"},null,8,["modelValue"])]),_:1}),i("div",$,[l(V,{type:"danger",round:"",block:"","native-type":"submit",loading:r.value},{default:u(()=>[...e[5]||(e[5]=[Q(" 保存修改 ",-1)])]),_:1},8,["loading"])])]),_:1})])])}}},L=y(j,[["__scopeId","data-v-ab14a591"]]);export{L as default};
