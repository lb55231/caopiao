import{_ as U,u as q,r as n,o as F,b as d,c as a,d as f,e as r,w as l,s as k,F as K,h as j,f as t,l as D,t as i,g as c,j as p,k as E}from"./index-755e54f6.js";import{g as G}from"./image-19d603d6.js";import{g as P}from"./lottery-115786bf.js";import{T as S}from"./Tabbar-7bdceb30.js";const A={class:"merchants-page"},H={key:0,class:"merchant-list"},J=["onClick"],O={class:"merchant-header"},Q={class:"merchant-logo"},W=["src"],X={class:"merchant-info"},Y={class:"merchant-name"},Z={class:"merchant-desc"},ee={class:"merchant-tags"},se={class:"merchant-status"},te={class:"merchant-stats"},oe={class:"stat-item"},ae={class:"stat-value"},ne={class:"stat-item"},le={class:"stat-value"},ie={class:"stat-item"},de={class:"stat-value"},re={class:"merchant-action"},ce={__name:"Index",setup(_e){const w=q(),b=n(""),x=n("all"),m=n([]),y=n([]),_=n(!1),C=n(!1),g=n(!1),h=async()=>{try{_.value=!0;const s=await P();s.code===200&&(y.value=s.data||[],L())}catch(s){k("加载失败"),console.error("加载商家列表失败:",s)}finally{_.value=!1,g.value=!1,C.value=!0}},L=()=>{let s=[...y.value];if(x.value!=="all"&&(s=s.filter(e=>e.typeid===x.value)),b.value){const e=b.value.toLowerCase();s=s.filter(u=>u.title.toLowerCase().includes(e)||u.ftitle.toLowerCase().includes(e))}m.value=s},V=()=>{h()},M=()=>{y.value.length===0&&h()},I=s=>({k3:"快3",ssc:"时时彩","11x5":"11选5",pk10:"PK10"})[s]||s,N=(s,e)=>!s||!e?"全天":`${s.slice(0,5)}-${e.slice(0,5)}`,$=s=>{if(!s.isopen){k("商家休息中");return}s.typeid==="k3"?w.push({path:`/game/${s.typeid}/${s.name}`,query:{title:s.title}}):k("该游戏暂未开放")};return F(()=>{h()}),(s,e)=>{const u=d("van-nav-bar"),v=d("van-tag"),B=d("van-button"),T=d("van-empty"),z=d("van-list"),R=d("van-pull-refresh");return a(),f("div",A,[r(u,{title:"商家列表",fixed:"",placeholder:"",border:!1}),r(R,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),onRefresh:V},{default:l(()=>[r(z,{loading:_.value,"onUpdate:loading":e[0]||(e[0]=o=>_.value=o),finished:C.value,"finished-text":"没有更多了",onLoad:M},{default:l(()=>[m.value.length>0?(a(),f("div",H,[(a(!0),f(K,null,j(m.value,o=>(a(),f("div",{key:o.id,class:"merchant-card",onClick:ue=>$(o)},[t("div",O,[t("div",Q,[t("img",{src:D(G)(o.logo)},null,8,W)]),t("div",X,[t("div",Y,i(o.title),1),t("div",Z,i(o.ftitle),1),t("div",ee,[r(v,{type:"primary",size:"mini"},{default:l(()=>[c(i(I(o.typeid)),1)]),_:2},1024),o.issys?(a(),p(v,{key:0,type:"success",size:"mini"},{default:l(()=>[...e[2]||(e[2]=[c("官方",-1)])]),_:1})):E("",!0)])]),t("div",se,[o.isopen?(a(),p(v,{key:0,type:"success",round:""},{default:l(()=>[...e[3]||(e[3]=[c("营业中",-1)])]),_:1})):(a(),p(v,{key:1,type:"danger",round:""},{default:l(()=>[...e[4]||(e[4]=[c("休息中",-1)])]),_:1}))])]),t("div",te,[t("div",oe,[t("div",ae,i(o.qishu),1),e[5]||(e[5]=t("div",{class:"stat-label"},"每日期数",-1))]),t("div",ne,[t("div",le,i(o.ftime)+"分",1),e[6]||(e[6]=t("div",{class:"stat-label"},"开奖频率",-1))]),t("div",ie,[t("div",de,i(N(o.closetime1,o.closetime2)),1),e[7]||(e[7]=t("div",{class:"stat-label"},"营业时间",-1))])]),t("div",re,[r(B,{type:"primary",size:"small",round:"",block:"",color:"#ff6034",disabled:!o.isopen},{default:l(()=>[c(i(o.isopen?"立即下单":"休息中"),1)]),_:2},1032,["disabled"])])],8,J))),128))])):(a(),p(T,{key:1,image:"search",description:"暂无商家"}))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),r(S)])}}},ye=U(ce,[["__scopeId","data-v-ec54594f"]]);export{ye as default};
