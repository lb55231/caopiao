import{_ as C,u as h,q as y,r as I,p as $,o as w,b as d,c as q,d as x,e as s,f as t,t as p,w as l,i as T,s as f,g as m}from"./index-755e54f6.js";import{T as Q}from"./Tabbar-7bdceb30.js";import{s as g}from"./function-call-fb17f912.js";const S={name:"UserCenter",components:{Tabbar:Q},setup(){const n=h(),e=y(),r=I({}),a=$(()=>e.userInfo||{}),_=async()=>{try{const o=await T.get("/system/config");o.code===200&&(r.value=o.data)}catch(o){console.error("加载配置失败:",o)}},b=()=>{r.value.servicecode?window.location.href=r.value.servicecode:r.value.serviceqq?g({title:"联系客服",message:`客服QQ：${r.value.serviceqq}`,confirmButtonText:"复制QQ",confirmButtonColor:"#ee0a24"}).then(()=>{const o=document.createElement("input");document.body.appendChild(o),o.setAttribute("value",r.value.serviceqq),o.select(),document.execCommand("copy")&&f("QQ号已复制"),document.body.removeChild(o)}):f("暂无客服信息")},u=()=>{g({title:"提示",message:"确定要退出登录吗？"}).then(()=>{e.logout(),f("已退出登录"),n.push("/login")}).catch(()=>{})},c=async()=>{try{await e.getUserInfo()}catch(o){console.error("加载用户信息失败:",o)}};return w(()=>{e.token&&c(),_()}),{userInfo:a,handleContactService:b,handleLogout:u}}},B={class:"user-page"},U={class:"user-content"},D={class:"user-header"},N={class:"avatar-box"},V=["src"],z={class:"user-info"},E={class:"username"},L={class:"user-id"},A={class:"balance-box"},M={class:"balance-item"},R={class:"balance-value"},j={class:"balance-actions"},F={class:"logout-box"};function G(n,e,r,a,_,b){const u=d("van-nav-bar"),c=d("van-button"),o=d("van-cell"),v=d("van-cell-group"),k=d("Tabbar");return q(),x("div",B,[s(u,{title:"个人中心",fixed:""}),t("div",U,[t("div",D,[t("div",N,[t("img",{src:a.userInfo.avatar||"https://api.dicebear.com/7.x/avataaars/svg?seed="+a.userInfo.username,class:"avatar"},null,8,V)]),t("div",z,[t("div",E,p(a.userInfo.username),1),t("div",L,"ID: "+p(a.userInfo.id),1)])]),t("div",A,[t("div",M,[t("div",R,p(a.userInfo.balance||0),1),e[7]||(e[7]=t("div",{class:"balance-label"},"账户余额(元)",-1))]),t("div",j,[s(c,{type:"danger",size:"small",onClick:e[0]||(e[0]=i=>n.$router.push("/account/recharge"))},{default:l(()=>[...e[8]||(e[8]=[m(" 充值 ",-1)])]),_:1}),s(c,{plain:"",type:"danger",size:"small",onClick:e[1]||(e[1]=i=>n.$router.push("/account/withdraw"))},{default:l(()=>[...e[9]||(e[9]=[m(" 提现 ",-1)])]),_:1})])]),s(v,{class:"menu-group"},{default:l(()=>[s(o,{title:"投注记录",icon:"orders-o","is-link":"",onClick:e[2]||(e[2]=i=>n.$router.push("/records/bet"))}),s(o,{title:"账变记录",icon:"balance-list-o","is-link":"",onClick:e[3]||(e[3]=i=>n.$router.push("/records/account"))}),s(o,{title:"银行卡管理",icon:"credit-pay","is-link":"",onClick:e[4]||(e[4]=i=>n.$router.push("/account/bank"))})]),_:1}),s(v,{class:"menu-group"},{default:l(()=>[s(o,{title:"修改密码",icon:"lock","is-link":"",onClick:e[5]||(e[5]=i=>n.$router.push("/user/password"))}),s(o,{title:"个人资料",icon:"contact","is-link":"",onClick:e[6]||(e[6]=i=>n.$router.push("/user/profile"))})]),_:1}),s(v,{class:"menu-group"},{default:l(()=>[s(o,{title:"联系客服",icon:"service-o","is-link":"",onClick:a.handleContactService},null,8,["onClick"])]),_:1}),t("div",F,[s(c,{block:"",round:"",type:"danger",onClick:a.handleLogout},{default:l(()=>[...e[10]||(e[10]=[m(" 退出登录 ",-1)])]),_:1},8,["onClick"])])]),s(k)])}const O=C(S,[["render",G],["__scopeId","data-v-efd5256b"]]);export{O as default};
