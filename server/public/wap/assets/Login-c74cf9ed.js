import{_ as w,u as y,q as k,r as V,v as x,o as C,b as l,c as g,d as p,f as t,k as S,t as U,e as n,w as r,i as N,s as i,g as m}from"./index-755e54f6.js";import{g as B}from"./image-19d603d6.js";const I={name:"Login",setup(){const c=y(),e=k(),a=V({username:"",password:""}),o=x({webtitle:"云集",weblogo:""}),u=async()=>{try{const s=await N.get("/system/config");s.code===200&&(Object.assign(o,s.data),document.title=o.webtitle)}catch(s){console.error("加载网站配置失败:",s)}},f=async()=>{if(!a.value.username){i("请输入账号");return}if(!a.value.password){i("请输入密码");return}const s=await e.login(a.value);s.success?(i("登录成功"),setTimeout(()=>{c.push("/")},1e3)):i(s.message||"登录失败")};return C(()=>{u()}),{form:a,siteConfig:o,onSubmit:f,getImageUrl:B}}},L={class:"login-page"},T={class:"logo-box"},h=["src"],q={class:"welcome-text"},j={class:"welcome-title"},D={class:"login-form"},E={class:"form-item"},M={class:"form-item"},O={class:"link-box"};function R(c,e,a,o,u,f){const s=l("van-field"),b=l("van-button"),v=l("van-form"),_=l("router-link");return g(),p("div",L,[t("div",T,[o.siteConfig.weblogo?(g(),p("img",{key:0,src:o.getImageUrl(o.siteConfig.weblogo),alt:"logo"},null,8,h)):S("",!0)]),t("div",q,[t("span",j,"欢迎来到 "+U(o.siteConfig.webtitle||"云集"),1)]),t("div",D,[n(v,{onSubmit:o.onSubmit},{default:r(()=>[t("div",E,[e[2]||(e[2]=t("span",{class:"form-label"},"账　号",-1)),n(s,{modelValue:o.form.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.form.username=d),placeholder:"请输入账号",border:!1},null,8,["modelValue"])]),t("div",M,[e[3]||(e[3]=t("span",{class:"form-label"},"密　码",-1)),n(s,{modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.form.password=d),type:"password",placeholder:"请输入密码",border:!1},null,8,["modelValue"])]),n(b,{round:"",block:"",type:"danger","native-type":"submit",class:"login-btn"},{default:r(()=>[...e[4]||(e[4]=[m(" 立即登录 ",-1)])]),_:1})]),_:1},8,["onSubmit"]),t("div",O,[n(_,{to:"/forget",class:"link"},{default:r(()=>[...e[5]||(e[5]=[m("忘记密码?",-1)])]),_:1}),n(_,{to:"/register",class:"link"},{default:r(()=>[...e[6]||(e[6]=[m("立即注册",-1)])]),_:1})])])])}const F=w(I,[["render",R],["__scopeId","data-v-898ec61e"]]);export{F as default};
