import{_ as V,r as v,o as A,b as i,c as f,d as u,e as s,f as l,w as k,V as F,s as M,F as B,h as N,n as C,t as g,k as x,j as I}from"./index-755e54f6.js";const U={name:"Record",setup(){const _=v("all"),t=v([]),h=v(!1),e=v(!1),c=v(!1),d=v(1),p=20,r=n=>({recharge:"cashier-o",withdraw:"balance-o",bet:"shopping-cart-o",win:"smile-o",refund:"replay",commission:"gold-coin-o"})[n]||"orders-o",y=n=>({recharge:"充值",withdraw:"提现",bet:"投注",win:"中奖",refund:"退款",commission:"佣金"})[n]||"其他",b=n=>parseFloat(n)>=0?"amount-plus":"amount-minus",w=n=>{const o=parseFloat(n);return(o>=0?"+":"")+o.toFixed(2)},T=n=>new Date(n*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),m=async()=>{try{const n={page:d.value,limit:p};_.value!=="all"&&(n.type=_.value);const o=await F(n);o.code===200&&(d.value===1?t.value=o.data.list:t.value.push(...o.data.list),t.value.length>=o.data.total&&(c.value=!0))}catch(n){console.error("加载失败:",n),M("加载失败")}finally{h.value=!1,e.value=!1}},a=()=>{d.value=1,c.value=!1,t.value=[],m()},L=()=>{d.value=1,c.value=!1,m()},R=()=>{c.value||(d.value++,m())};return A(()=>{m()}),{activeTab:_,list:t,loading:h,refreshing:e,finished:c,getTypeIcon:r,getTypeText:y,getAmountClass:b,formatAmount:w,formatTime:T,onTabChange:a,onRefresh:L,onLoad:R}}},z={class:"record-page"},D={class:"record-content"},S={class:"record-list"},j={class:"record-info"},E={class:"record-title"},q={class:"record-time"},G={key:0,class:"record-remark"};function H(_,t,h,e,c,d){const p=i("van-nav-bar"),r=i("van-tab"),y=i("van-tabs"),b=i("van-icon"),w=i("van-empty"),T=i("van-list"),m=i("van-pull-refresh");return f(),u("div",z,[s(p,{title:"账变记录","left-arrow":"",onClickLeft:t[0]||(t[0]=a=>_.$router.back()),fixed:""}),l("div",D,[s(y,{active:e.activeTab,"onUpdate:active":t[1]||(t[1]=a=>e.activeTab=a),onChange:e.onTabChange},{default:k(()=>[s(r,{title:"全部",name:"all"}),s(r,{title:"充值",name:"recharge"}),s(r,{title:"提现",name:"withdraw"}),s(r,{title:"投注",name:"bet"}),s(r,{title:"中奖",name:"win"})]),_:1},8,["active","onChange"]),s(m,{modelValue:e.refreshing,"onUpdate:modelValue":t[3]||(t[3]=a=>e.refreshing=a),onRefresh:e.onRefresh},{default:k(()=>[s(T,{loading:e.loading,"onUpdate:loading":t[2]||(t[2]=a=>e.loading=a),finished:e.finished,"finished-text":"没有更多了",onLoad:e.onLoad},{default:k(()=>[l("div",S,[(f(!0),u(B,null,N(e.list,a=>(f(),u("div",{key:a.id,class:"record-item"},[l("div",{class:C(["record-icon",`type-${a.type}`])},[s(b,{name:e.getTypeIcon(a.type)},null,8,["name"])],2),l("div",j,[l("div",E,g(e.getTypeText(a.type)),1),l("div",q,g(e.formatTime(a.create_time)),1),a.remark?(f(),u("div",G,g(a.remark),1)):x("",!0)]),l("div",{class:C(["record-amount",e.getAmountClass(a.amount)])},g(e.formatAmount(a.amount)),3)]))),128))]),!e.loading&&e.list.length===0?(f(),I(w,{key:0,description:"暂无记录"})):x("",!0)]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])])}const K=V(U,[["render",H],["__scopeId","data-v-7f930645"]]);export{K as default};
