import{_ as O,u as S,v as j,r as _,o as D,b as l,c as i,d,e as r,f as a,w as g,F as h,h as y,g as E,X as I,s as x,n as k,t as u,k as M,j as P}from"./index-755e54f6.js";const X={class:"account-records-page"},$={class:"filter-box"},q={class:"filter-item"},G={class:"filter-item"},H={class:"filter-buttons"},J=["onClick"],K={key:0,class:"records-list"},Q={class:"record-header"},W={class:"type-info"},Y={class:"typename"},Z={class:"time"},ee={class:"amount-info"},te={class:"balance"},ae={key:0,class:"record-remark"},se={class:"value"},oe={class:"tip-box"},ne={__name:"AccountRecords",setup(le){const b=S(),s=j({type:"0",atime:"3",page:1,pageSize:10}),w=_([{text:"全部摘要",value:"0"},{text:"充值",value:"recharge"},{text:"提现",value:"withdraw"},{text:"投注",value:"order"},{text:"中奖",value:"prize"},{text:"撤单",value:"cancel"}]),V=[{text:"今天",value:"1"},{text:"昨天",value:"2"},{text:"七天",value:"3"}],n=_([]),p=_(!1),c=_(!1),m=_(!1),C=()=>{b.back()},R=o=>{s.atime=o,s.page=1,n.value=[],c.value=!1,v()},L=()=>{s.page=1,n.value=[],c.value=!1,m.value=!0,v()},A=()=>{v()},v=async()=>{try{p.value=!0;const o=await I(s);if(o.code===200){const t=o.data.records||[];s.page===1?n.value=t:n.value=[...n.value,...t];const f=o.data.pagination;f.page>=f.totalPages||t.length===0?c.value=!0:s.page++}else x(o.msg||"加载失败"),c.value=!0}catch(o){x(o.message||"加载失败"),c.value=!0}finally{p.value=!1,m.value=!1}};return D(()=>{v()}),(o,t)=>{const f=l("van-nav-bar"),B=l("van-dropdown-item"),N=l("van-dropdown-menu"),z=l("van-empty"),T=l("van-list"),U=l("van-pull-refresh"),F=l("van-icon");return i(),d("div",X,[r(f,{title:"账变记录","left-arrow":"",onClickLeft:C}),a("div",$,[a("div",q,[t[3]||(t[3]=a("span",{class:"filter-label"},"摘要：",-1)),r(N,null,{default:g(()=>[r(B,{modelValue:s.type,"onUpdate:modelValue":t[0]||(t[0]=e=>s.type=e),options:w.value,onChange:v},null,8,["modelValue","options"])]),_:1})]),a("div",G,[t[4]||(t[4]=a("span",{class:"filter-label"},"时间：",-1)),a("div",H,[(i(),d(h,null,y(V,e=>a("span",{key:e.value,class:k(["filter-btn",{active:s.atime===e.value}]),onClick:ie=>R(e.value)},u(e.text),11,J)),64))])])]),r(U,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),onRefresh:L},{default:g(()=>[r(T,{loading:p.value,"onUpdate:loading":t[1]||(t[1]=e=>p.value=e),finished:c.value,"finished-text":"没有更多了",onLoad:A},{default:g(()=>[n.value.length>0?(i(),d("div",K,[(i(!0),d(h,null,y(n.value,e=>(i(),d("div",{key:e.id,class:"record-item"},[a("div",Q,[a("div",W,[a("div",Y,u(e.typename),1),a("div",Z,u(e.time_formatted),1)]),a("div",ee,[a("div",{class:k(["amount",{"amount-in":e.amount_type==="in","amount-out":e.amount_type==="out"}])},u(e.amount_formatted),3),a("div",te,"余额："+u(e.amountafter),1)])]),e.remark?(i(),d("div",ae,[t[5]||(t[5]=a("span",{class:"label"},"备注：",-1)),a("span",se,u(e.remark),1)])):M("",!0)]))),128))])):(i(),P(z,{key:1,description:"暂无记录"}))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),a("div",oe,[r(F,{name:"info-o"}),t[6]||(t[6]=E(" 温馨提示：交易记录最多只保留7天。 ",-1))])])}}},de=O(ne,[["__scopeId","data-v-b83c49cc"]]);export{de as default};
