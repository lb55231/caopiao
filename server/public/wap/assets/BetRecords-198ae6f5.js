import{_ as I,u as M,v as P,r as _,o as W,b as r,c as n,d,e as p,f as s,t as a,n as b,w as y,F as w,h as x,g as q,W as A,s as h,k,j as G}from"./index-755e54f6.js";const H={class:"bet-records-page"},J={class:"summary-box"},K={class:"summary-content"},Q={class:"summary-item"},X={class:"value"},Y={class:"summary-item"},Z={class:"value"},ss={class:"summary-item"},es={class:"filter-box"},ts={class:"filter-item"},as={class:"filter-item"},os={class:"filter-buttons"},ls=["onClick"],ns={class:"filter-item"},is={class:"filter-buttons"},ds=["onClick"],us={key:0,class:"records-list"},rs={class:"record-header"},cs={class:"lottery-name"},vs={class:"record-row"},_s={class:"value"},ps={class:"record-row"},ms={class:"value"},fs={class:"record-row"},gs={class:"value amount"},bs={key:0,class:"record-row"},ys={class:"value"},ws={key:1,class:"record-row"},xs={class:"value win-amount"},hs={class:"record-footer"},ks={class:"time"},Cs={class:"tip-box"},Vs={__name:"BetRecords",setup(Rs){const C=M(),o=P({cpname:"0",atime:"1",a_item:"1",page:1,pageSize:10}),V=_([{text:"全部商户",value:"0"}]),R=[{text:"今天",value:"1"},{text:"昨天",value:"2"},{text:"七天",value:"3"}],B=[{text:"全部",value:"1"},{text:"已匹配订单",value:"2"},{text:"未匹配订单",value:"3"},{text:"待匹配",value:"4"}],i=_([]),c=_({total_bet:"0.00",total_win:"0.00",profit:"0.00"}),m=_(!1),u=_(!1),f=_(!1),L=()=>{C.back()},F=l=>{o.atime=l,o.page=1,i.value=[],u.value=!1,v()},N=l=>{o.a_item=l,o.page=1,i.value=[],u.value=!1,v()},z=()=>{o.page=1,i.value=[],u.value=!1,f.value=!0,v()},O=()=>{v()},v=async()=>{try{m.value=!0;const l=await A(o);if(l.code===200){const e=l.data.records||[];o.page===1?(i.value=e,c.value=l.data.summary):i.value=[...i.value,...e];const g=l.data.pagination;g.page>=g.totalPages||e.length===0?u.value=!0:o.page++}else h(l.msg||"加载失败"),u.value=!0}catch(l){h(l.message||"加载失败"),u.value=!0}finally{m.value=!1,f.value=!1}};return W(()=>{v()}),(l,e)=>{const g=r("van-nav-bar"),S=r("van-dropdown-item"),T=r("van-dropdown-menu"),U=r("van-empty"),$=r("van-list"),j=r("van-pull-refresh"),D=r("van-icon");return n(),d("div",H,[p(g,{title:"投注记录","left-arrow":"",onClickLeft:L}),s("div",J,[e[6]||(e[6]=s("div",{class:"summary-title"},"今日概况",-1)),s("div",K,[s("div",Q,[e[3]||(e[3]=s("span",{class:"label"},"下单金额：",-1)),s("span",X,a(c.value.total_bet)+"元",1)]),s("div",Y,[e[4]||(e[4]=s("span",{class:"label"},"收益金额：",-1)),s("span",Z,a(c.value.total_win)+"元",1)]),s("div",ss,[e[5]||(e[5]=s("span",{class:"label"},"盈利：",-1)),s("span",{class:b(["value",{profit:parseFloat(c.value.profit)>0,loss:parseFloat(c.value.profit)<0}])},a(c.value.profit)+"元 ",3)])])]),s("div",es,[s("div",ts,[e[7]||(e[7]=s("span",{class:"filter-label"},"商品：",-1)),p(T,null,{default:y(()=>[p(S,{modelValue:o.cpname,"onUpdate:modelValue":e[0]||(e[0]=t=>o.cpname=t),options:V.value,onChange:v},null,8,["modelValue","options"])]),_:1})]),s("div",as,[e[8]||(e[8]=s("span",{class:"filter-label"},"时间：",-1)),s("div",os,[(n(),d(w,null,x(R,t=>s("span",{key:t.value,class:b(["filter-btn",{active:o.atime===t.value}]),onClick:E=>F(t.value)},a(t.text),11,ls)),64))])]),s("div",ns,[e[9]||(e[9]=s("span",{class:"filter-label"},"状态：",-1)),s("div",is,[(n(),d(w,null,x(B,t=>s("span",{key:t.value,class:b(["filter-btn",{active:o.a_item===t.value}]),onClick:E=>N(t.value)},a(t.text),11,ds)),64))])])]),p(j,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),onRefresh:z},{default:y(()=>[p($,{loading:m.value,"onUpdate:loading":e[1]||(e[1]=t=>m.value=t),finished:u.value,"finished-text":"没有更多了",onLoad:O},{default:y(()=>[i.value.length>0?(n(),d("div",us,[(n(!0),d(w,null,x(i.value,t=>(n(),d("div",{key:t.id,class:"record-item"},[s("div",rs,[s("span",cs,a(t.cptitle),1),s("span",{class:b(["status",{"status-pending":t.isdraw===0,"status-win":t.isdraw===1,"status-lose":t.isdraw===-1,"status-cancel":t.isdraw===-2}])},a(t.status_text),3)]),s("div",vs,[e[10]||(e[10]=s("span",{class:"label"},"期号：",-1)),s("span",_s,a(t.expect),1)]),s("div",ps,[e[11]||(e[11]=s("span",{class:"label"},"下单内容：",-1)),s("span",ms,a(t.playtitle)+"--"+a(t.tzcode),1)]),s("div",fs,[e[12]||(e[12]=s("span",{class:"label"},"下单金额：",-1)),s("span",gs,a(t.amount)+"元",1)]),t.opencode?(n(),d("div",bs,[e[13]||(e[13]=s("span",{class:"label"},"匹配单号：",-1)),s("span",ys,a(t.opencode),1)])):k("",!0),t.isdraw===1?(n(),d("div",ws,[e[14]||(e[14]=s("span",{class:"label"},"返佣：",-1)),s("span",xs,a(t.okamount)+"元",1)])):k("",!0),s("div",hs,[s("span",ks,a(t.time_formatted),1)])]))),128))])):(n(),G(U,{key:1,description:"暂无记录"}))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),s("div",Cs,[p(D,{name:"info-o"}),e[15]||(e[15]=q(" 温馨提示：下单记录最多只保留7天。 ",-1))])])}}},Ls=I(Vs,[["__scopeId","data-v-9e638bf0"]]);export{Ls as default};
