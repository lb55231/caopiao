import{_ as U,u as O,r as u,o as R,b as r,c as i,d as h,e as l,w as _,i as j,s as q,F as A,h as E,f as s,t as o,n as H,j as y,g as x,k as Y}from"./index-755e54f6.js";import{T as G}from"./Tabbar-7bdceb30.js";const J={class:"orders-page"},K={key:0},P=["onClick"],Q={class:"order-header"},W={class:"order-no"},X={class:"order-content"},Z={class:"lottery-info"},tt={class:"lottery-icon"},et={class:"lottery-details"},st={class:"lottery-name"},at={class:"lottery-period"},nt={class:"lottery-play"},ot={class:"order-amount"},lt={class:"value"},it={class:"order-footer"},ct={class:"order-time"},rt={class:"order-actions"},C=20,dt={__name:"Index",setup(ut){const M=O(),f=u("all"),c=u([]),b=u(!1),v=u(!1),S=u(!1),m=u(1),g=async(a=!1)=>{try{a&&(m.value=1,c.value=[],v.value=!1);const t={page:m.value,limit:C};f.value!=="all"&&(t.status=D(f.value));const d=await j.get("/user/bet/records",{params:t});if(d.code===200){const n=d.data.records||[];a?c.value=n:c.value=[...c.value,...n],n.length<C&&(v.value=!0),m.value++}}catch(t){q("加载失败"),console.error("加载订单失败:",t)}finally{b.value=!1,S.value=!1}},T=()=>{g(!0)},V=()=>{v.value||g()},z=()=>{c.value=[],m.value=1,v.value=!1,g(!0)},$=a=>({"-1":"待开奖",0:"未中奖",1:"已中奖"})[String(a)]||"未知",B=a=>({"-1":"pending",0:"lost",1:"won"})[String(a)]||"",D=a=>({pending:-1,won:1,lost:0})[a],I=a=>{const t=new Date(a*1e3),d=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),k=String(t.getDate()).padStart(2,"0"),p=String(t.getHours()).padStart(2,"0"),w=String(t.getMinutes()).padStart(2,"0");return`${d}-${n}-${k} ${p}:${w}`},L=a=>{M.push(`/orders/${a.id}`)};return R(()=>{g(!0)}),(a,t)=>{const d=r("van-nav-bar"),n=r("van-tab"),k=r("van-tabs"),p=r("van-button"),w=r("van-empty"),N=r("van-list"),F=r("van-pull-refresh");return i(),h("div",J,[l(d,{title:"我的订单",fixed:"",placeholder:"",border:!1}),l(k,{active:f.value,"onUpdate:active":t[0]||(t[0]=e=>f.value=e),sticky:"","offset-top":46,onChange:z},{default:_(()=>[l(n,{title:"全部",name:"all"}),l(n,{title:"待匹配",name:"pending"}),l(n,{title:"已匹配",name:"won"}),l(n,{title:"未匹配",name:"lost"})]),_:1},8,["active"]),l(F,{modelValue:S.value,"onUpdate:modelValue":t[2]||(t[2]=e=>S.value=e),onRefresh:T},{default:_(()=>[l(N,{loading:b.value,"onUpdate:loading":t[1]||(t[1]=e=>b.value=e),finished:v.value,"finished-text":"没有更多了",onLoad:V},{default:_(()=>[c.value.length>0?(i(),h("div",K,[(i(!0),h(A,null,E(c.value,e=>(i(),h("div",{key:e.id,class:"order-card",onClick:_t=>L(e)},[s("div",Q,[s("span",W,"订单号："+o(e.trano),1),s("span",{class:H(["order-status",B(e.isdraw)])},o(e.status_text||$(e.isdraw)),3)]),s("div",X,[s("div",Z,[s("div",tt,o(e.cptitle?e.cptitle.charAt(0):"彩"),1),s("div",et,[s("div",st,o(e.cptitle),1),s("div",at,"第 "+o(e.expect)+" 期",1),s("div",nt,o(e.playtitle)+" · "+o(e.tzcode),1)])]),s("div",ot,[t[3]||(t[3]=s("span",{class:"label"},"投注金额",-1)),s("span",lt,"¥"+o(e.amount),1)])]),s("div",it,[s("div",ct,o(I(e.oddtime)),1),s("div",rt,[e.isdraw===-1?(i(),y(p,{key:0,size:"small",round:"",color:"#ff6034"},{default:_(()=>[...t[4]||(t[4]=[x(" 等待开奖 ",-1)])]),_:1})):e.isdraw===1?(i(),y(p,{key:1,size:"small",round:"",type:"success"},{default:_(()=>[x(" 中奖 ¥"+o(e.okamount),1)]),_:2},1024)):e.isdraw===0?(i(),y(p,{key:2,size:"small",round:"",plain:"",type:"default"},{default:_(()=>[...t[5]||(t[5]=[x(" 未中奖 ",-1)])]),_:1})):Y("",!0)])])],8,P))),128))])):(i(),y(w,{key:1,image:"search","image-size":"120",description:"暂无订单记录"}))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),l(G)])}}},ft=U(dt,[["__scopeId","data-v-afab93e6"]]);export{ft as default};
