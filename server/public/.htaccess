<IfModule mod_rewrite.c>
  Options +FollowSymlinks -Multiviews
  RewriteEngine On

  # 静态资源直接访问（文件存在时）
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^uploads/ - [L]
  
  # 前端 SPA 路由支持（优先处理）
  # 移动端 H5 - /wap/ 路由
  RewriteCond %{REQUEST_URI} ^/wap/
  RewriteCond %{REQUEST_URI} !^/wap/assets/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^wap/.*$ wap/index.html [L]

  # 代理后台 - /agent/ 路由
  RewriteCond %{REQUEST_URI} ^/agent/
  RewriteCond %{REQUEST_URI} !^/agent/assets/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^agent/.*$ agent/index.html [L]

  # 管理后台 - /admin/ 路由
  RewriteCond %{REQUEST_URI} ^/admin/
  RewriteCond %{REQUEST_URI} !^/admin/assets/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^admin/.*$ admin/index.html [L]

  # API 请求转发到 ThinkPHP
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]
</IfModule>
