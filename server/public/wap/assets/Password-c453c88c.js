import{_ as k,u as T,q as B,r as P,v as _,b as u,c as C,d as N,e as o,f as n,w as r,g as b,s as d,E as g,D as h}from"./index-755e54f6.js";import{s as D}from"./function-call-fb17f912.js";const E={class:"password-page"},F={class:"password-content"},L={class:"submit-box"},$={class:"submit-box"},I={__name:"Password",setup(R){const V=T(),y=B(),i=P(!1),p=P("login"),a=_({oldPassword:"",newPassword:"",confirmPassword:""}),s=_({oldPassword:"",newPassword:"",confirmPassword:""}),x=async()=>{if(!a.oldPassword){d("请输入旧密码");return}if(!a.newPassword){d("请输入新密码");return}if(a.newPassword.length<6||a.newPassword.length>20){d("密码长度为6-20位");return}if(a.newPassword!==a.confirmPassword){d("两次密码输入不一致");return}try{i.value=!0;const t=await g({type:"login",oldPassword:a.oldPassword,newPassword:a.newPassword});t.code===200?D({title:"修改成功",message:"登录密码修改成功，请重新登录",confirmButtonText:"确定",confirmButtonColor:"#ee0a24"}).then(()=>{y.logout(),V.push("/login")}):d(t.msg||"修改失败")}catch(t){d(t.message||"网络错误，请稍后重试")}finally{i.value=!1}},U=async()=>{if(!s.oldPassword){d("请输入旧密码");return}if(!s.newPassword){d("请输入新密码");return}if(s.newPassword!==s.confirmPassword){d("两次密码输入不一致");return}try{i.value=!0;const t=await g({type:"trade",oldPassword:s.oldPassword,newPassword:s.newPassword});t.code===200?(h("支付密码修改成功"),s.oldPassword="",s.newPassword="",s.confirmPassword=""):d(t.msg||"修改失败")}catch(t){d(t.message||"网络错误，请稍后重试")}finally{i.value=!1}};return(t,e)=>{const q=u("van-nav-bar"),w=u("van-field"),m=u("van-cell-group"),f=u("van-button"),c=u("van-form"),v=u("van-tab"),S=u("van-tabs");return C(),N("div",E,[o(q,{title:"修改密码","left-arrow":"",onClickLeft:e[0]||(e[0]=l=>t.$router.back()),fixed:""}),n("div",F,[o(S,{active:p.value,"onUpdate:active":e[7]||(e[7]=l=>p.value=l),color:"#ee0a24"},{default:r(()=>[o(v,{title:"登录密码",name:"login"},{default:r(()=>[o(c,{onSubmit:x},{default:r(()=>[o(m,null,{default:r(()=>[o(w,{modelValue:a.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=l=>a.oldPassword=l),type:"password",label:"旧密码",placeholder:"请输入旧登录密码",required:""},null,8,["modelValue"]),o(w,{modelValue:a.newPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>a.newPassword=l),type:"password",label:"新密码",placeholder:"请输入新登录密码(6-20位)",required:""},null,8,["modelValue"]),o(w,{modelValue:a.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>a.confirmPassword=l),type:"password",label:"确认密码",placeholder:"请再次输入新密码",required:""},null,8,["modelValue"])]),_:1}),n("div",L,[o(f,{type:"danger",round:"",block:"","native-type":"submit",loading:i.value},{default:r(()=>[...e[8]||(e[8]=[b(" 确认修改 ",-1)])]),_:1},8,["loading"])])]),_:1}),e[9]||(e[9]=n("div",{class:"tips"},[n("p",null,"登录密码修改提示："),n("p",null,"1. 密码长度为6-20位字符"),n("p",null,"2. 建议使用字母+数字组合"),n("p",null,"3. 修改成功后请重新登录")],-1))]),_:1}),o(v,{title:"支付密码",name:"trade"},{default:r(()=>[o(c,{onSubmit:U},{default:r(()=>[o(m,null,{default:r(()=>[o(w,{modelValue:s.oldPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>s.oldPassword=l),type:"password",label:"旧密码",placeholder:"请输入旧支付密码",required:""},null,8,["modelValue"]),o(w,{modelValue:s.newPassword,"onUpdate:modelValue":e[5]||(e[5]=l=>s.newPassword=l),type:"password",label:"新密码",placeholder:"请输入新支付密码(6位数字)",required:"",maxlength:"6"},null,8,["modelValue"]),o(w,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=l=>s.confirmPassword=l),type:"password",label:"确认密码",placeholder:"请再次输入新密码",required:"",maxlength:"6"},null,8,["modelValue"])]),_:1}),n("div",$,[o(f,{type:"danger",round:"",block:"","native-type":"submit",loading:i.value},{default:r(()=>[...e[10]||(e[10]=[b(" 确认修改 ",-1)])]),_:1},8,["loading"])])]),_:1}),e[11]||(e[11]=n("div",{class:"tips"},[n("p",null,"支付密码修改提示："),n("p",null,"1. 支付密码为6位纯数字"),n("p",null,"2. 用于提现、绑定银行卡等操作"),n("p",null,"3. 请妥善保管支付密码"),n("p",null,"4. 如忘记支付密码，请联系客服")],-1))]),_:1})]),_:1},8,["active"])])])}}},A=k(I,[["__scopeId","data-v-6967cddd"]]);export{A as default};
