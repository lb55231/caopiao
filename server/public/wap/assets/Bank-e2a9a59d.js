import{_ as w,u as x,r as L,o as $,b as r,c as n,d as c,e as m,f as a,F as D,h as N,j as p,w as i,J as V,s as o,t as l,g as _,k as f,L as z,M as F}from"./index-755e54f6.js";import{a as M}from"./function-call-fb17f912.js";const S={class:"bank-page"},T={class:"bank-content"},j={key:0,class:"bank-list"},E={class:"card-header"},I={class:"bank-name"},J={class:"card-body"},R={class:"card-number"},q={class:"card-owner"},A={class:"card-footer"},G={class:"add-box"},H={__name:"Bank",setup(K){x();const d=L([]),k=t=>{if(!t)return"";const e=t.length;return e<=8?t:t.substring(0,4)+" **** **** "+t.substring(e-4)},u=async()=>{try{const t=await V();t.code===200&&(d.value=t.data.list)}catch(t){o("加载失败："+t.message)}},g=async t=>{try{const e=await z(t.id);e.code===200?(o("设置成功"),u()):o(e.msg||"设置失败")}catch(e){o("设置失败："+e.message)}},y=async t=>{M({title:"提示",message:"确定要删除这张银行卡吗？"}).then(async()=>{try{const e=await F(t.id);e.code===200?(o("删除成功"),u()):o(e.msg||"删除失败")}catch(e){o("删除失败："+e.message)}}).catch(()=>{})};return $(()=>{u()}),(t,e)=>{const h=r("van-nav-bar"),b=r("van-tag"),v=r("van-button"),C=r("van-empty");return n(),c("div",S,[m(h,{title:"银行卡管理","left-arrow":"",onClickLeft:e[0]||(e[0]=s=>t.$router.back()),fixed:""}),a("div",T,[d.value.length>0?(n(),c("div",j,[(n(!0),c(D,null,N(d.value,s=>(n(),c("div",{key:s.id,class:"bank-card"},[a("div",E,[a("div",I,l(s.bankname),1),s.isdefault==1?(n(),p(b,{key:0,type:"success"},{default:i(()=>[...e[2]||(e[2]=[_("默认",-1)])]),_:1})):f("",!0)]),a("div",J,[a("div",R,l(k(s.banknumber)),1),a("div",q,l(s.accountname),1)]),a("div",A,[s.isdefault!=1?(n(),p(v,{key:0,size:"small",plain:"",type:"danger",onClick:B=>g(s)},{default:i(()=>[...e[3]||(e[3]=[_(" 设为默认 ",-1)])]),_:1},8,["onClick"])):f("",!0),m(v,{size:"small",type:"danger",onClick:B=>y(s)},{default:i(()=>[...e[4]||(e[4]=[_(" 删除 ",-1)])]),_:1},8,["onClick"])])]))),128))])):(n(),p(C,{key:1,description:"暂无银行卡"})),a("div",G,[m(v,{type:"danger",block:"",round:"",onClick:e[1]||(e[1]=s=>t.$router.push("/account/add-bank")),disabled:d.value.length>=3},{default:i(()=>[_(l(d.value.length>=3?"最多绑定3张银行卡":"添加银行卡"),1)]),_:1},8,["disabled"])])])])}}},Q=w(H,[["__scopeId","data-v-de8cd009"]]);export{Q as default};
