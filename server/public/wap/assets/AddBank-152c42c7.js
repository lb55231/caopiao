import{_ as S,u as T,q as $,r as p,v as w,o as A,b,c as v,d as F,e as t,f as i,n as g,j as N,w as c,s,N as q,D as B,g as U}from"./index-755e54f6.js";const I={class:"add-bank-page"},j={class:"add-bank-content"},z={class:"type-tabs"},D={class:"submit-box"},E={class:"submit-box"},L={__name:"AddBank",setup(M){const k=T(),x=$(),d=p(!1),r=p("alipay"),m=p(""),l=w({accountname:"",account:"",password:""}),a=w({accountname:"",bankname:"",banknumber:"",confirmNumber:"",password:""}),f=async()=>{if(r.value==="alipay"){if(!l.accountname||!l.account||!l.password){s("请填写完整信息");return}try{d.value=!0;const o=await q({bankname:"支付宝",bankcode:"支付宝",accountname:l.accountname,banknumber:l.account,password:l.password});o.code===200?(B("绑定成功"),setTimeout(()=>{k.push("/account/bank")},1500)):s(o.msg||"绑定失败")}catch(o){s(o.message||"网络错误，请稍后重试")}finally{d.value=!1}}else{if(!a.accountname||!a.bankname||!a.banknumber||!a.confirmNumber||!a.password){s("请填写完整信息");return}if(a.accountname.length<2){s("姓名至少两位");return}if(a.banknumber!==a.confirmNumber){s("两次卡号输入的不一致，请重新输入");return}try{d.value=!0;const o=await q({bankname:a.bankname,bankcode:a.bankname,accountname:a.accountname,banknumber:a.banknumber,password:a.password});o.code===200?(B("银行绑定成功"),setTimeout(()=>{k.push("/account/bank")},1500)):s(o.msg||"绑定失败")}catch(o){s(o.message||"网络错误，请稍后重试")}finally{d.value=!1}}};return A(()=>{var o;m.value=((o=x.userInfo)==null?void 0:o.userbankname)||"",m.value&&(l.accountname=m.value,a.accountname=m.value)}),(o,e)=>{const C=b("van-nav-bar"),u=b("van-field"),_=b("van-cell-group"),y=b("van-button"),V=b("van-form");return v(),F("div",I,[t(C,{title:"绑定提现账号","left-arrow":"",onClickLeft:e[0]||(e[0]=n=>o.$router.back()),fixed:""}),i("div",j,[i("div",z,[i("button",{class:g(["type-btn",{active:r.value==="alipay"}]),onClick:e[1]||(e[1]=n=>r.value="alipay")}," 支付宝 ",2),i("button",{class:g(["type-btn",{active:r.value==="bank"}]),onClick:e[2]||(e[2]=n=>r.value="bank")}," 银行卡 ",2)]),r.value==="alipay"?(v(),N(V,{key:0,onSubmit:f},{default:c(()=>[t(_,null,{default:c(()=>[t(u,{modelValue:l.accountname,"onUpdate:modelValue":e[3]||(e[3]=n=>l.accountname=n),label:"本人姓名",placeholder:"请输入您的真实姓名",disabled:!!m.value,required:""},null,8,["modelValue","disabled"]),t(u,{modelValue:l.account,"onUpdate:modelValue":e[4]||(e[4]=n=>l.account=n),label:"支付宝账号",placeholder:"请输入支付宝账号",required:""},null,8,["modelValue"]),t(u,{modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=n=>l.password=n),type:"password",label:"资金密码",placeholder:"请输入资金密码",required:""},null,8,["modelValue"])]),_:1}),i("div",D,[t(y,{type:"danger",round:"",block:"","native-type":"submit",loading:d.value},{default:c(()=>[...e[11]||(e[11]=[U(" 提交 ",-1)])]),_:1},8,["loading"])])]),_:1})):(v(),N(V,{key:1,onSubmit:f},{default:c(()=>[t(_,null,{default:c(()=>[t(u,{modelValue:a.accountname,"onUpdate:modelValue":e[6]||(e[6]=n=>a.accountname=n),label:"持卡人姓名",placeholder:"请输入您的真实姓名",disabled:!!m.value,required:""},null,8,["modelValue","disabled"]),t(u,{modelValue:a.bankname,"onUpdate:modelValue":e[7]||(e[7]=n=>a.bankname=n),label:"银行",placeholder:"请输入银行",required:""},null,8,["modelValue"]),t(u,{modelValue:a.banknumber,"onUpdate:modelValue":e[8]||(e[8]=n=>a.banknumber=n),label:"银行卡号",type:"digit",placeholder:"请输入银行卡的卡号",required:""},null,8,["modelValue"]),t(u,{modelValue:a.confirmNumber,"onUpdate:modelValue":e[9]||(e[9]=n=>a.confirmNumber=n),label:"确认卡号",type:"digit",placeholder:"请再次输入银行卡号",required:""},null,8,["modelValue"]),t(u,{modelValue:a.password,"onUpdate:modelValue":e[10]||(e[10]=n=>a.password=n),type:"password",label:"资金密码",placeholder:"请输入您的资金密码",required:""},null,8,["modelValue"])]),_:1}),i("div",E,[t(y,{type:"danger",round:"",block:"","native-type":"submit",loading:d.value},{default:c(()=>[...e[12]||(e[12]=[U(" 确定 ",-1)])]),_:1},8,["loading"])])]),_:1}))])])}}},G=S(L,[["__scopeId","data-v-1675dee4"]]);export{G as default};
