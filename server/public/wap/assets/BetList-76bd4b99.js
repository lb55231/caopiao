import{_ as x,u as B,r as u,o as V,b as f,c as p,d as m,e as l,f as t,w as C,s as R,F as D,h as N,t as o,n as S,k,j as M}from"./index-755e54f6.js";import{i as U}from"./lottery-115786bf.js";const z={name:"BetList",setup(){const h=B(),s=u("all"),r=u([]),a=u(!1),b=u(!1),d=u(!1),i=u(1),c=20,g=n=>({0:"待开奖",1:"已中奖",2:"未中奖",3:"已撤单"})[n]||"未知",y=n=>new Date(n*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),_=async()=>{try{const n={page:i.value,limit:c};s.value!=="all"&&(n.status=s.value);const v=await U(n);v.code===200&&(i.value===1?r.value=v.data.list:r.value.push(...v.data.list),r.value.length>=v.data.total&&(d.value=!0))}catch(n){console.error("加载失败:",n),R("加载失败")}finally{a.value=!1,b.value=!1}},w=()=>{i.value=1,d.value=!1,r.value=[],_()},e=()=>{i.value=1,d.value=!1,_()},L=()=>{d.value||(i.value++,_())},T=n=>{h.push(`/bet/detail?order_no=${n.order_no}`)};return V(()=>{_()}),{activeTab:s,list:r,loading:a,refreshing:b,finished:d,getStatusText:g,formatTime:y,onTabChange:w,onRefresh:e,onLoad:L,viewDetail:T}}},F={class:"bet-list-page"},j={class:"bet-content"},E={class:"bet-list"},I=["onClick"],q={class:"bet-header"},A={class:"lottery-name"},G={class:"bet-info"},H={class:"info-row"},J={class:"value"},K={class:"info-row"},O={class:"value"},P={class:"info-row"},Q={class:"value"},W={class:"info-row"},X={class:"value amount"},Y={key:0,class:"info-row"},Z={class:"value win-amount"},$={class:"bet-footer"},tt={class:"order-no"},st={class:"bet-time"};function et(h,s,r,a,b,d){const i=f("van-nav-bar"),c=f("van-tab"),g=f("van-tabs"),y=f("van-empty"),_=f("van-list"),w=f("van-pull-refresh");return p(),m("div",F,[l(i,{title:"投注记录","left-arrow":"",onClickLeft:s[0]||(s[0]=e=>h.$router.back()),fixed:""}),t("div",j,[l(g,{active:a.activeTab,"onUpdate:active":s[1]||(s[1]=e=>a.activeTab=e),onChange:a.onTabChange},{default:C(()=>[l(c,{title:"全部",name:"all"}),l(c,{title:"待开奖",name:"0"}),l(c,{title:"已中奖",name:"1"}),l(c,{title:"未中奖",name:"2"})]),_:1},8,["active","onChange"]),l(w,{modelValue:a.refreshing,"onUpdate:modelValue":s[3]||(s[3]=e=>a.refreshing=e),onRefresh:a.onRefresh},{default:C(()=>[l(_,{loading:a.loading,"onUpdate:loading":s[2]||(s[2]=e=>a.loading=e),finished:a.finished,"finished-text":"没有更多了",onLoad:a.onLoad},{default:C(()=>[t("div",E,[(p(!0),m(D,null,N(a.list,e=>(p(),m("div",{key:e.id,class:"bet-item",onClick:L=>a.viewDetail(e)},[t("div",q,[t("span",A,o(e.lottery_name),1),t("span",{class:S(["bet-status",`status-${e.status}`])},o(a.getStatusText(e.status)),3)]),t("div",G,[t("div",H,[s[4]||(s[4]=t("span",{class:"label"},"期号：",-1)),t("span",J,o(e.period),1)]),t("div",K,[s[5]||(s[5]=t("span",{class:"label"},"玩法：",-1)),t("span",O,o(e.play_name),1)]),t("div",P,[s[6]||(s[6]=t("span",{class:"label"},"投注内容：",-1)),t("span",Q,o(e.bet_content),1)]),t("div",W,[s[7]||(s[7]=t("span",{class:"label"},"投注金额：",-1)),t("span",X,o(e.bet_amount)+" 元",1)]),e.status===1?(p(),m("div",Y,[s[8]||(s[8]=t("span",{class:"label"},"中奖金额：",-1)),t("span",Z,o(e.win_amount)+" 元",1)])):k("",!0)]),t("div",$,[t("span",tt,"订单号："+o(e.order_no),1),t("span",st,o(a.formatTime(e.create_time)),1)])],8,I))),128))]),!a.loading&&a.list.length===0?(p(),M(y,{key:0,description:"暂无投注记录"})):k("",!0)]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])])}const ot=x(z,[["render",et],["__scopeId","data-v-cd427e5e"]]);export{ot as default};
